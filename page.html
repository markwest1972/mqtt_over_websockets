<!-- Also use http://www.hivemq.com/demos/websocket-client/ -->

<html>
<head>
  <title>test Ws mqtt.js</title>
</head>
<body>
<script src="browserMqtt.js"></script>
<script>

      // Works fine
/*      var options = {
        host: "broker.mqttdashboard.com",
        port: 8000
      };*/

      // Doesn't work
      var options = {
        host: "iot.eclipse.org",
        port: 80
      };

      // Doesn't work
/*
      var options = {
        host: "test.mosquitto.org",
        port: 8080
      };
*/
      var client = mqtt.connect(options);

      console.log(client);

      client.subscribe("mqtt/demo");

      client.on("message", function(topic, payload) {
        alert([topic, payload].join(": "));
        client.end();
      });

      client.publish("mqtt/demo", "hello world!");
    </script>
</body>
</html>
